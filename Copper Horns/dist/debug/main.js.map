{"version":3,"sources":["../../scripts/main.ts"],"sourcesContent":["import { world, ItemComponentCompleteUseEvent, ItemStack } from \"@minecraft/server\";\n\n/**\n * Copper Horns\n * - Plays all 3 if jumping\n * else\n * - Plays Bass if sneaking\n * else\n * - Plays Harmony if looking up at least 45Â°\n * else\n * - Plays Melody\n */\nclass PokeCopperHorns{\n  onCompleteUse(data:ItemComponentCompleteUseEvent){\n    let MelodyTrack = `melody.${data.itemStack?.typeId}`\n    let BassTrack = `bass.${data.itemStack?.typeId}`\n    let HarmonyTrack = `harmony.${data.itemStack?.typeId}`\n    //All\n    if (data.source.isJumping){\n      data.source.playSound(BassTrack)\n      data.source.playSound(HarmonyTrack)\n      data.source.playSound(MelodyTrack)\n    }else\n    //Bass\n    if (data.source.isSneaking){\n      data.source.playSound(BassTrack)\n    }else \n    //Harmony\n    if (data.source.getViewDirection().y >= 0.45){\n      data.source.playSound(HarmonyTrack)\n    }\n    //Melody\n    else {\n      data.source.playSound(MelodyTrack)\n    }\n    data.source.startItemCooldown(`goat_horn`,140)\n  }\n}\n\n/**\n * Normal Goat Horn Functionality\n */\nclass PokeGoatHorn{\n  onCompleteUse(data:ItemComponentCompleteUseEvent){\n    data.source.playSound(`horn.${data.itemStack?.typeId}`)\n    data.source.startItemCooldown(`goat_horn`,140)\n  }\n}\n\n/**\n *  2 Removed normal horns obtaining\n */\nworld.afterEvents.entityDie.subscribe(data => {\n  if (!(data.deadEntity.typeId=='minecraft:goat'))return;\n  else if (Math.random() >= 0.95){\n    if (Math.random() >= 0.5) data.deadEntity.dimension.spawnItem(new ItemStack(`poke:fly_goat_horn`,1),data.deadEntity.location);\n    else data.deadEntity.dimension.spawnItem(new ItemStack(`poke:resist_goat_horn`,1),data.deadEntity.location);\n  }\n})\n\n/**\n * Custom Component Registering\n */\nworld.beforeEvents.worldInitialize.subscribe(data => {\n  data.itemComponentRegistry.registerCustomComponent(\n    \"poke:copper_horn\", new PokeCopperHorns()\n  )\n  data.itemComponentRegistry.registerCustomComponent(\n    \"poke:goat_horn\", new PokeGoatHorn()\n  )\n})"],"mappings":";AAAA,SAAS,OAAsC,iBAAiB;AAYhE,IAAM,kBAAN,MAAqB;AAAA,EACnB,cAAc,MAAmC;AAC/C,QAAI,cAAc,UAAU,KAAK,WAAW,MAAM;AAClD,QAAI,YAAY,QAAQ,KAAK,WAAW,MAAM;AAC9C,QAAI,eAAe,WAAW,KAAK,WAAW,MAAM;AAEpD,QAAI,KAAK,OAAO,WAAU;AACxB,WAAK,OAAO,UAAU,SAAS;AAC/B,WAAK,OAAO,UAAU,YAAY;AAClC,WAAK,OAAO,UAAU,WAAW;AAAA,IACnC,WAEI,KAAK,OAAO,YAAW;AACzB,WAAK,OAAO,UAAU,SAAS;AAAA,IACjC,WAEI,KAAK,OAAO,iBAAiB,EAAE,KAAK,MAAK;AAC3C,WAAK,OAAO,UAAU,YAAY;AAAA,IACpC,OAEK;AACH,WAAK,OAAO,UAAU,WAAW;AAAA,IACnC;AACA,SAAK,OAAO,kBAAkB,aAAY,GAAG;AAAA,EAC/C;AACF;AAKA,IAAM,eAAN,MAAkB;AAAA,EAChB,cAAc,MAAmC;AAC/C,SAAK,OAAO,UAAU,QAAQ,KAAK,WAAW,MAAM,EAAE;AACtD,SAAK,OAAO,kBAAkB,aAAY,GAAG;AAAA,EAC/C;AACF;AAKA,MAAM,YAAY,UAAU,UAAU,UAAQ;AAC5C,MAAI,EAAE,KAAK,WAAW,UAAQ;AAAkB;AAAA,WACvC,KAAK,OAAO,KAAK,MAAK;AAC7B,QAAI,KAAK,OAAO,KAAK;AAAK,WAAK,WAAW,UAAU,UAAU,IAAI,UAAU,sBAAqB,CAAC,GAAE,KAAK,WAAW,QAAQ;AAAA;AACvH,WAAK,WAAW,UAAU,UAAU,IAAI,UAAU,yBAAwB,CAAC,GAAE,KAAK,WAAW,QAAQ;AAAA,EAC5G;AACF,CAAC;AAKD,MAAM,aAAa,gBAAgB,UAAU,UAAQ;AACnD,OAAK,sBAAsB;AAAA,IACzB;AAAA,IAAoB,IAAI,gBAAgB;AAAA,EAC1C;AACA,OAAK,sBAAsB;AAAA,IACzB;AAAA,IAAkB,IAAI,aAAa;AAAA,EACrC;AACF,CAAC;","names":[],"file":"../scripts/main.js"}